{% extends 'posts/base.html' %}
{% block content %}
  {% load static%}
  <head>
    <link rel="stylesheet" href="{% static 'css/photo_home.css' %}" />
  </head>
  <body>
    <div class="content">
      {% if photo_page.state == "deactivate" %}
        <script type="text/javascript">
          alert('ì•„ì§ ìƒì¼ í˜ì´ì§€ê°€ í™œì„±í™”ë˜ì§€ ì•Šì•˜ì–´ìš”!')
          window.location.href = '{% url 'posts:main' %}';
        </script>
      {% elif photo_page.state == "activate" or photo_page.state == "archive" %}
        {% if photo_page.state == "archive" %}
          <div>
            {{name}}ë‹˜ì˜
            {{year}}ë…„ í¬í†  ë°©ëª…ë¡ í˜ì´ì§€ì…ë‹ˆë‹¤
          </div>
        {%endif%}
        <div class="text">
            <h1 class="text__title">í¬í† ë°©ëª…ë¡</h1>
            <p class="text__description">
                ë³´ì—¬ì£¼ê³  ì‹¶ì€ ì‚¬ì§„ìœ¼ë¡œ</br>ì¶•í•˜ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!
            </p>
        </div>
        <div class="images">
          <div class="images__container">
            {% if photos %}
              {% for photo in photos %}
                <div class="images__item">
                    <img class="images__item__pin rotate" src="{% static 'img/pin.png' %}" alt="">
                    {% if is_owner or request.user == photo.photo_uploader %}
                        {% if not photo_page.state == "archive" %}
                            <p class="images__item__delete-btn"><a href="{% url 'photos:photo_delete' photo.id %}">x</a></p>
                        {% endif %}
                    {% else %}
                        <p class="images__item__delete-btn">ã€€</p>
                    {% endif %}
                    <div class="images__item__polaroid">
                        <p><img src=" {{photo.req_photo.url}}" alt=""></p>
                        <h3>{{photo.title}}</h3>
                    </div>
                </div>
              {% endfor %}
          </div>
        </div>
      {% else %}
          <div>
          ì•„ì§ ì˜¬ë¼ì˜¨ ì‚¬ì§„ì´ ì—†ì–´ìš” ğŸ˜¢
          </div>
      {% endif %}
          {% if not is_owner%}
            {% if not photo_page.state == "archive"%}
              <div>
                <a href="{% url 'photos:photo_create' year pk %}">ì‚¬ì§„ ì˜¬ë¦¬ê¸°</a>
              </div>
            {% endif %}
          {% endif %}
    </div>
  </body>
    {%endif %}
    <script>
        var randomList = ['-10', '-7', '-5', '5', '7', '10']
        const getRandom = (min, max) => Math.random() * (max - min) + min;
        var rand;
        var pin = document.getElementsByClassName("rotate")
        for (i=0; i<pin.length; i++) {
            rand = randomList[Math.floor(Math.random()*randomList.length)];
            console.log(rand)
            pin[i].style.transform = 'rotate('+rand+'deg)';
        }
    </script>
  {% endblock %}
